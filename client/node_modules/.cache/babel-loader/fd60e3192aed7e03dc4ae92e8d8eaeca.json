{"ast":null,"code":"var _jsxFileName = \"/Users/dea/Code/Projects/react_foodfacts2/experimental/client/src/Components/Chart.js\";\nimport React, { useState, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Card, CardContent, Typography } from \"@material-ui/core\";\nimport { Radar, RadarChart, PolarGrid, Legend, PolarAngleAxis, PolarRadiusAxis, ResponsiveContainer } from 'recharts'; // example of data format \n\n/*\nconst realData = [\n  {nutrient: \"calories\", apple: 52, banana: 50, kiwi: 61, max: 89},\n  {nutrient: \"fat\", apple: 0.17, banana: 0.33, kiwi: 50.52, max: 0.52},\n  {nutrient: \"carbs\", apple: 13.81, banana: 22.84, kiwi: 74.66, max: 22.84},\n  {nutrient: \"proteins\", apple: 0.26, banana: 81.09, kiwi: 1.14, max: 1.14},\n  {nutrient: \"fiber\", apple: 2.4, banana: 82.6, kiwi: 3, max: 3}\n]\n*/\n\nconst useStyles = makeStyles({\n  root: {\n    maxWidth: 700,\n    minWidth: 290,\n    height: 500,\n    marginBottom: 20,\n    background: '#3f3b3b',\n    color: 'white',\n    opacity: 0.90\n  }\n});\n\nfunction MyRadarChart(props) {\n  const styles = useStyles();\n  const fills = [\"#DB5375\", \"#EC9192\", \"#f8dc88\", \"#B5BD89\", \"#729EA1\"]; //array of the current foods \n\n  function getFoods(data) {\n    return Object.keys(data).filter(el => el !== \"nutrient\" && el !== \"max\");\n  }\n\n  const currentFoods = getFoods(props.data[0]); //opacity \n\n  function handleOpacities(opacity) {\n    let opacities = [];\n    currentFoods.forEach(food => opacities.push([food, opacity]));\n    opacities = Object.fromEntries(opacities);\n    return opacities;\n  }\n\n  const startOpacities = handleOpacities(0.8);\n  const baseOpacities = handleOpacities(0.4);\n  const [opacities, setOpacities] = useState(startOpacities);\n\n  function handleLegendClick(e) {\n    const {\n      dataKey\n    } = e;\n    setOpacities({ ...baseOpacities,\n      [dataKey]: 0.9\n    });\n  }\n\n  useEffect(() => {\n    console.log(\"The data changed\");\n    setOpacities(baseOpacities);\n    console.log(props.data);\n  }, [props.data]);\n  return /*#__PURE__*/React.createElement(Card, {\n    className: styles.root,\n    elevation: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 22\n    }\n  }, \"Nutritional distribution\")), /*#__PURE__*/React.createElement(ResponsiveContainer, {\n    width: \"99%\",\n    height: \"74%\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(RadarChart, {\n    outerRadius: \"70%\",\n    data: props.data,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(PolarGrid, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(PolarAngleAxis, {\n    dataKey: \"nutrient\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(PolarRadiusAxis, {\n    angle: 30,\n    domain: [0, 20],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 15\n    }\n  }), currentFoods.map((food, id) => /*#__PURE__*/React.createElement(Radar, {\n    key: id,\n    name: food,\n    dataKey: food,\n    fill: fills[id],\n    fillOpacity: opacities[food],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 17\n    }\n  })), \"r\", /*#__PURE__*/React.createElement(Legend, {\n    onClick: handleLegendClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"subtitle2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 22\n    }\n  }, \"*click on food in legend\")));\n}\n\nexport default MyRadarChart;","map":{"version":3,"sources":["/Users/dea/Code/Projects/react_foodfacts2/experimental/client/src/Components/Chart.js"],"names":["React","useState","useEffect","makeStyles","Card","CardContent","Typography","Radar","RadarChart","PolarGrid","Legend","PolarAngleAxis","PolarRadiusAxis","ResponsiveContainer","useStyles","root","maxWidth","minWidth","height","marginBottom","background","color","opacity","MyRadarChart","props","styles","fills","getFoods","data","Object","keys","filter","el","currentFoods","handleOpacities","opacities","forEach","food","push","fromEntries","startOpacities","baseOpacities","setOpacities","handleLegendClick","e","dataKey","console","log","map","id"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Card, CardContent, Typography } from \"@material-ui/core\";\nimport {\n  Radar, RadarChart, PolarGrid, Legend,\n  PolarAngleAxis, PolarRadiusAxis, ResponsiveContainer, \n} from 'recharts';\n\n\n// example of data format \n/*\nconst realData = [\n  {nutrient: \"calories\", apple: 52, banana: 50, kiwi: 61, max: 89},\n  {nutrient: \"fat\", apple: 0.17, banana: 0.33, kiwi: 50.52, max: 0.52},\n  {nutrient: \"carbs\", apple: 13.81, banana: 22.84, kiwi: 74.66, max: 22.84},\n  {nutrient: \"proteins\", apple: 0.26, banana: 81.09, kiwi: 1.14, max: 1.14},\n  {nutrient: \"fiber\", apple: 2.4, banana: 82.6, kiwi: 3, max: 3}\n]\n*/\n\n\nconst useStyles = makeStyles({\n  root: {\n    maxWidth: 700,\n    minWidth: 290,\n    height: 500,\n    marginBottom: 20,\n    background: '#3f3b3b',\n    color: 'white',\n    opacity: 0.90\n  }\n})\n\n\n\nfunction MyRadarChart(props) {\n    const styles = useStyles();\n    const fills = [\"#DB5375\", \"#EC9192\", \"#f8dc88\", \"#B5BD89\", \"#729EA1\"]\n\n    //array of the current foods \n    function getFoods(data){\n      return Object.keys(data).filter(el => el!==\"nutrient\"&&el!==\"max\")\n    }\n    const currentFoods = getFoods(props.data[0])\n\n    //opacity \n\n    function handleOpacities(opacity){\n      let opacities = [];\n      currentFoods.forEach(food => opacities.push([food, opacity]))\n      opacities = Object.fromEntries(opacities)\n      return opacities\n    }\n    const startOpacities = handleOpacities(0.8);\n    const baseOpacities = handleOpacities(0.4);\n\n    const [opacities, setOpacities] = useState(startOpacities)\n\n\n    function handleLegendClick(e){\n      const { dataKey } = e\n      setOpacities({...baseOpacities, [dataKey]: 0.9});\n    }\n\n    useEffect(()=>{\n      console.log(\"The data changed\")\n      setOpacities(baseOpacities)\n      console.log(props.data)\n    }, [props.data])\n\n\n    return (    \n      <Card className={styles.root} elevation={6}>\n        <CardContent><Typography variant=\"h5\">Nutritional distribution</Typography></CardContent>\n        <ResponsiveContainer width=\"99%\" height=\"74%\">\n            <RadarChart outerRadius={\"70%\"}  data={props.data} >\n              <PolarGrid />\n              <PolarAngleAxis dataKey=\"nutrient\" />\n              <PolarRadiusAxis angle={30} domain={[0, 20]} />\n\n              {currentFoods.map((food, id) => (\n                <Radar key={id} name={food} dataKey={food} fill={fills[id]} fillOpacity={opacities[food]} />))}\nr\n            {/* \n              <Radar name=\"Apple\" dataKey=\"apple\" fill=\"#8884d8\" fillOpacity={0.6} />\n              <Radar name=\"Banana\" dataKey=\"banana\" fill=\"#82ca9d\" fillOpacity={0.6} />\n              <Radar name=\"Kiwi\" dataKey=\"kiwi\" fill=\"#edb2c2\" fillOpacity={0.6} />\n            */} \n              <Legend onClick={handleLegendClick}/>\n            </RadarChart> \n        </ResponsiveContainer>   \n        <CardContent><Typography variant=\"subtitle2\">*click on food in legend</Typography></CardContent>     \n      </Card>\n      \n    );\n  }\n\n\nexport default MyRadarChart;\n\n"]},"metadata":{},"sourceType":"module"}