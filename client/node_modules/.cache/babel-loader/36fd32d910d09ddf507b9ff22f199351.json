{"ast":null,"code":"import _defineProperty from\"/Users/dea/Code/Projects/react_foodfacts2/experimental/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/dea/Code/Projects/react_foodfacts2/experimental/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/dea/Code/Projects/react_foodfacts2/experimental/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{makeStyles}from'@material-ui/core/styles';import{Card,CardContent,Typography}from\"@material-ui/core\";import{Radar,RadarChart,PolarGrid,Legend,PolarAngleAxis,PolarRadiusAxis,ResponsiveContainer}from'recharts';// example of data format \n/*\nconst realData = [\n  {nutrient: \"calories\", apple: 52, banana: 50, kiwi: 61, max: 89},\n  {nutrient: \"fat\", apple: 0.17, banana: 0.33, kiwi: 50.52, max: 0.52},\n  {nutrient: \"carbs\", apple: 13.81, banana: 22.84, kiwi: 74.66, max: 22.84},\n  {nutrient: \"proteins\", apple: 0.26, banana: 81.09, kiwi: 1.14, max: 1.14},\n  {nutrient: \"fiber\", apple: 2.4, banana: 82.6, kiwi: 3, max: 3}\n]\n*/var useStyles=makeStyles({root:{maxWidth:700,minWidth:200,height:500,background:'#3f3b3b',color:'white',opacity:0.90}});function MyRadarChart(props){var styles=useStyles();var fills=[\"#DB5375\",\"#EC9192\",\"#f8dc88\",\"#B5BD89\",\"#729EA1\"];//array of the current foods \nfunction getFoods(data){return Object.keys(data).filter(function(el){return el!==\"nutrient\"&&el!==\"max\"&&el!==\"calories\";});}var currentFoods=getFoods(props.data[0]);//opacity \nfunction handleOpacities(opacity){var opacities=[];currentFoods.forEach(function(food){return opacities.push([food,opacity]);});opacities=Object.fromEntries(opacities);return opacities;}var startOpacities=handleOpacities(0.8);var baseOpacities=handleOpacities(0.4);var _useState=useState(startOpacities),_useState2=_slicedToArray(_useState,2),opacities=_useState2[0],setOpacities=_useState2[1];function handleLegendClick(e){var dataKey=e.dataKey;setOpacities(_objectSpread(_objectSpread({},baseOpacities),{},_defineProperty({},dataKey,0.9)));}useEffect(function(){console.log(\"The data changed\");setOpacities(baseOpacities);console.log(props.data);},[props.data]);return/*#__PURE__*/React.createElement(Card,{className:styles.root,elevation:6},/*#__PURE__*/React.createElement(CardContent,null,/*#__PURE__*/React.createElement(Typography,{variant:\"h5\"},\"Nutritional distribution\")),/*#__PURE__*/React.createElement(ResponsiveContainer,{width:\"99%\",height:\"74%\"},/*#__PURE__*/React.createElement(RadarChart,{outerRadius:\"70%\",data:props.data.slice(1)},/*#__PURE__*/React.createElement(PolarGrid,null),/*#__PURE__*/React.createElement(PolarAngleAxis,{dataKey:\"nutrient\"}),/*#__PURE__*/React.createElement(PolarRadiusAxis,{angle:30,domain:[0,20]}),currentFoods.map(function(food,id){return/*#__PURE__*/React.createElement(Radar,{key:id,name:food,dataKey:food,fill:fills[id],fillOpacity:opacities[food]});}),\"r\",/*#__PURE__*/React.createElement(Legend,{onClick:handleLegendClick}))),/*#__PURE__*/React.createElement(CardContent,null,/*#__PURE__*/React.createElement(Typography,{variant:\"subtitle2\"},\"*click on food in legend\")));}export default MyRadarChart;","map":{"version":3,"sources":["/Users/dea/Code/Projects/react_foodfacts2/experimental/client/src/Components/Chart.js"],"names":["React","useState","useEffect","makeStyles","Card","CardContent","Typography","Radar","RadarChart","PolarGrid","Legend","PolarAngleAxis","PolarRadiusAxis","ResponsiveContainer","useStyles","root","maxWidth","minWidth","height","background","color","opacity","MyRadarChart","props","styles","fills","getFoods","data","Object","keys","filter","el","currentFoods","handleOpacities","opacities","forEach","food","push","fromEntries","startOpacities","baseOpacities","setOpacities","handleLegendClick","e","dataKey","console","log","slice","map","id"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Card, CardContent, Typography } from \"@material-ui/core\";\nimport {\n  Radar, RadarChart, PolarGrid, Legend,\n  PolarAngleAxis, PolarRadiusAxis, ResponsiveContainer, \n} from 'recharts';\n\n\n// example of data format \n/*\nconst realData = [\n  {nutrient: \"calories\", apple: 52, banana: 50, kiwi: 61, max: 89},\n  {nutrient: \"fat\", apple: 0.17, banana: 0.33, kiwi: 50.52, max: 0.52},\n  {nutrient: \"carbs\", apple: 13.81, banana: 22.84, kiwi: 74.66, max: 22.84},\n  {nutrient: \"proteins\", apple: 0.26, banana: 81.09, kiwi: 1.14, max: 1.14},\n  {nutrient: \"fiber\", apple: 2.4, banana: 82.6, kiwi: 3, max: 3}\n]\n*/\n\n\nconst useStyles = makeStyles({\n  root: {\n    maxWidth: 700,\n    minWidth: 200,\n    height: 500,\n    background: '#3f3b3b',\n    color: 'white',\n    opacity: 0.90,\n  }\n})\n\n\n\nfunction MyRadarChart(props) {\n    const styles = useStyles();\n    const fills = [\"#DB5375\", \"#EC9192\", \"#f8dc88\", \"#B5BD89\", \"#729EA1\"]\n\n    //array of the current foods \n    function getFoods(data){\n      return Object.keys(data).filter(el => el!==\"nutrient\"&&el!==\"max\"&&el!==\"calories\")\n    }\n    const currentFoods = getFoods(props.data[0])\n\n    //opacity \n\n    function handleOpacities(opacity){\n      let opacities = [];\n      currentFoods.forEach(food => opacities.push([food, opacity]))\n      opacities = Object.fromEntries(opacities)\n      return opacities\n    }\n    const startOpacities = handleOpacities(0.8);\n    const baseOpacities = handleOpacities(0.4);\n\n    const [opacities, setOpacities] = useState(startOpacities)\n\n\n    function handleLegendClick(e){\n      const { dataKey } = e\n      setOpacities({...baseOpacities, [dataKey]: 0.9});\n    }\n\n    useEffect(()=>{\n      console.log(\"The data changed\")\n      setOpacities(baseOpacities)\n      console.log(props.data)\n    }, [props.data])\n\n\n    return (    \n      <Card className={styles.root} elevation={6}>\n        <CardContent><Typography variant=\"h5\">Nutritional distribution</Typography></CardContent>\n        <ResponsiveContainer width=\"99%\" height=\"74%\">\n            <RadarChart outerRadius={\"70%\"}  data={props.data.slice(1)} >\n              <PolarGrid />\n              <PolarAngleAxis dataKey=\"nutrient\" />\n              <PolarRadiusAxis angle={30} domain={[0, 20]} />\n\n              {currentFoods.map((food, id) => (\n                <Radar key={id} name={food} dataKey={food} fill={fills[id]} fillOpacity={opacities[food]} />))}\nr\n            {/* \n              <Radar name=\"Apple\" dataKey=\"apple\" fill=\"#8884d8\" fillOpacity={0.6} />\n              <Radar name=\"Banana\" dataKey=\"banana\" fill=\"#82ca9d\" fillOpacity={0.6} />\n              <Radar name=\"Kiwi\" dataKey=\"kiwi\" fill=\"#edb2c2\" fillOpacity={0.6} />\n            */} \n              <Legend onClick={handleLegendClick}/>\n            </RadarChart> \n        </ResponsiveContainer>   \n        <CardContent><Typography variant=\"subtitle2\">*click on food in legend</Typography></CardContent>     \n      </Card>\n      \n    );\n  }\n\n\nexport default MyRadarChart;\n\n"]},"metadata":{},"sourceType":"module"}