{"ast":null,"code":"import _regeneratorRuntime from\"/Users/dea/Code/Projects/react_foodfacts2/deployment/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/Users/dea/Code/Projects/react_foodfacts2/deployment/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"/Users/dea/Code/Projects/react_foodfacts2/deployment/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/dea/Code/Projects/react_foodfacts2/deployment/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{Paper,Grid,createMuiTheme,ThemeProvider}from\"@material-ui/core\";import{makeStyles,useTheme}from\"@material-ui/core/styles\";import SearchBox from\"./Components/SearchBox\";import ImgMediaCard from\"./Components/ImgMediaCard\";import Chart from\"./Components/Chart\";import Header from\"./Components/Header\";import styles from\"./App.module.css\";import getData from\"./Functionality/api\";import dataTrasform from\"./Functionality/data\";//utility function \nfunction isNotEmpty(obj){for(var key in obj){if(obj.hasOwnProperty(key))return true;}return false;}function App(){/* FUNCTIONALITY */ /*** Data handling functionality ***/var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),userInput=_useState2[0],setUserInput=_useState2[1];//user input into the search for food form\nvar _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),foodNames=_useState4[0],setFoodNames=_useState4[1];//current list of food names\nvar _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),foodData=_useState6[0],setFoodData=_useState6[1];//current list of food data\nvar _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),selectedFoodData=_useState8[0],setSelectedFoodData=_useState8[1];//list of selected food data \nvar _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),foodTransformed=_useState10[0],setFoodTransformed=_useState10[1];// keep track of the current user input into input field\nfunction handleUserInput(event){var input=event.target.value;setUserInput(input);}//get food info button clicked -> get nutrition data from api and save it in foodNames and foodData\nfunction keepFoods(){return _keepFoods.apply(this,arguments);}function _keepFoods(){_keepFoods=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var nutrients;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;if(!(foodData.length<5)){_context.next=6;break;}_context.next=4;return getData(userInput);case 4:nutrients=_context.sent;if(isNotEmpty(nutrients)){if(!foodNames.includes(userInput)){setFoodNames(function(prevItem){return[].concat(_toConsumableArray(foodNames),[userInput]);});setFoodData(function(prevItem){return[].concat(_toConsumableArray(foodData),[nutrients]);});}}case 6:_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(\"Missing food\");case 11:setUserInput(\"\");case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return _keepFoods.apply(this,arguments);};// see if the checkbox next to each item is checked \n// if checked, keep the fooddata in the selectedFoodData state; else delete it from there\nfunction handleChecked(event,foodId){if(event.target.checked){keepSelectedFoods(foodId);}else{setSelectedFoodData(function(prevItems){return prevItems.filter(function(item,index){var currentFood=foodNames[foodId];var currentFoodData=foodData.find(function(x){return x.food===currentFood;});return item!==currentFoodData;});});};};//keep list of clicked (checked) foods, without repetition\nfunction keepSelectedFoods(foodId){var currentFood=foodNames[foodId];var currentFoodData=foodData.find(function(x){return x.food===currentFood;});setSelectedFoodData(function(prevItems){if(!prevItems.includes(currentFoodData)){return[].concat(_toConsumableArray(prevItems),[currentFoodData]);}else{return prevItems;}});};// transform the data into format expected by chart\nfunction handleDataTransform(){var foodDataTransformed=dataTrasform(selectedFoodData);setFoodTransformed(foodDataTransformed);}//clear all the stored food data on clicking \"clear table\"\nfunction handleClearTable(){setFoodData([]);setFoodNames([]);setSelectedFoodData([]);setFoodTransformed([]);};/* THEME */var _useState11=useState(true),_useState12=_slicedToArray(_useState11,2),darkMode=_useState12[0],setDarkMode=_useState12[1];var theme=createMuiTheme({palette:{type:darkMode?\"dark\":\"light\"}});var useStyles=makeStyles({root:{margin:0,padding:0,height:\"100%\",background:\"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)\"}});var classes=useStyles();return/*#__PURE__*/React.createElement(ThemeProvider,{theme:theme},/*#__PURE__*/React.createElement(Paper,{className:classes.root,square:true,elevation:0,height:\"150%\",pb:5},/*#__PURE__*/React.createElement(Grid,{container:true,direction:\"column\",spacing:5},/*#__PURE__*/React.createElement(Grid,{item:true},/*#__PURE__*/React.createElement(Header,{darkMode:darkMode,setDarkMode:setDarkMode})),/*#__PURE__*/React.createElement(Grid,{item:true,container:true,justify:\"center\"},/*#__PURE__*/React.createElement(SearchBox,{handleUserInput:handleUserInput,userInput:userInput,keepFoods:keepFoods})),/*#__PURE__*/React.createElement(Grid,{item:true,container:true,spacing:4,justify:\"center\"},/*#__PURE__*/React.createElement(Grid,{item:true,xs:10,sm:8,md:5},/*#__PURE__*/React.createElement(ImgMediaCard,{data:foodData,handleChecked:handleChecked,handleDataTransform:handleDataTransform,handleClearTable:handleClearTable,image:\"https://images.unsplash.com/photo-1506395308321-904a71783d60?ixlib=rb-1.2.1&auto=format&fit=crop&w=930&q=80\"})),isNotEmpty(foodTransformed)?/*#__PURE__*/React.createElement(Grid,{item:true,xs:10,sm:8,md:5},/*#__PURE__*/React.createElement(Chart,{data:foodTransformed})):null),/*#__PURE__*/React.createElement(Grid,{item:true}))));};export default App;","map":{"version":3,"sources":["/Users/dea/Code/Projects/react_foodfacts2/deployment/client/src/App.js"],"names":["React","useState","Paper","Grid","createMuiTheme","ThemeProvider","makeStyles","useTheme","SearchBox","ImgMediaCard","Chart","Header","styles","getData","dataTrasform","isNotEmpty","obj","key","hasOwnProperty","App","userInput","setUserInput","foodNames","setFoodNames","foodData","setFoodData","selectedFoodData","setSelectedFoodData","foodTransformed","setFoodTransformed","handleUserInput","event","input","target","value","keepFoods","length","nutrients","includes","prevItem","console","log","handleChecked","foodId","checked","keepSelectedFoods","prevItems","filter","item","index","currentFood","currentFoodData","find","x","food","handleDataTransform","foodDataTransformed","handleClearTable","darkMode","setDarkMode","theme","palette","type","useStyles","root","margin","padding","height","background","classes"],"mappings":"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","sourcesContent":["import React, {useState} from \"react\";\nimport { Paper, Grid, createMuiTheme, ThemeProvider} from \"@material-ui/core\";\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\nimport SearchBox from \"./Components/SearchBox\";\nimport ImgMediaCard from \"./Components/ImgMediaCard\";\nimport Chart from \"./Components/Chart\";\nimport Header from \"./Components/Header\";\nimport styles from \"./App.module.css\";\nimport getData from \"./Functionality/api\";\nimport dataTrasform from \"./Functionality/data\";\n\n//utility function \nfunction isNotEmpty(obj) {\n  for(var key in obj) {\n      if(obj.hasOwnProperty(key))\n          return true;\n  }\n  return false;\n}\n\n\nfunction App() {\n\n  /* FUNCTIONALITY */\n\n  /*** Data handling functionality ***/\n\n  const [userInput, setUserInput] = useState(\"\"); //user input into the search for food form\n  const [foodNames, setFoodNames] = useState([]); //current list of food names\n  const [foodData, setFoodData] = useState([]); //current list of food data\n  const [selectedFoodData, setSelectedFoodData] = useState([]); //list of selected food data \n  const [foodTransformed, setFoodTransformed] = useState([]);\n\n\n  // keep track of the current user input into input field\n  function handleUserInput(event){\n    const input = event.target.value;\n    setUserInput(input);\n  }\n\n  //get food info button clicked -> get nutrition data from api and save it in foodNames and foodData\n  async function keepFoods(){\n    try {\n      if (foodData.length<5){\n        const nutrients = await(getData(userInput));\n        if (isNotEmpty(nutrients)){\n          if (!foodNames.includes(userInput)){\n            setFoodNames(prevItem => {\n              return [...foodNames, userInput]\n            });\n            setFoodData(prevItem => {\n              return [...foodData, nutrients]\n            })\n          } \n        }\n      }\n    } catch (error) {\n      console.log(\"Missing food\")\n    }\n    setUserInput(\"\");\n  };\n\n   // see if the checkbox next to each item is checked \n  // if checked, keep the fooddata in the selectedFoodData state; else delete it from there\n  function handleChecked(event, foodId){\n    if (event.target.checked){\n      keepSelectedFoods(foodId)\n    } else {\n      setSelectedFoodData(prevItems => {\n        return prevItems.filter((item, index) => {\n          const currentFood = foodNames[foodId];\n          const currentFoodData = foodData.find(x => x.food === currentFood);\n          return item !== currentFoodData;\n        });\n      });\n    };\n  };\n\n  //keep list of clicked (checked) foods, without repetition\n  function keepSelectedFoods(foodId) {\n    const currentFood = foodNames[foodId];\n    const currentFoodData = foodData.find(x => x.food === currentFood);\n    setSelectedFoodData(prevItems => {\n      if (!prevItems.includes(currentFoodData)){\n        return [...prevItems, currentFoodData]\n      } else {\n        return prevItems\n      }\n    });\n  };\n\n  // transform the data into format expected by chart\n  function handleDataTransform(){\n    const foodDataTransformed = dataTrasform(selectedFoodData)\n    setFoodTransformed(foodDataTransformed);\n  }  \n\n  //clear all the stored food data on clicking \"clear table\"\n  function handleClearTable(){\n    setFoodData([])\n    setFoodNames([])\n    setSelectedFoodData([])\n    setFoodTransformed([])\n  };\n\n  /* THEME */\n\n  const [darkMode, setDarkMode] = useState(true); \n  const theme = createMuiTheme({\n    palette: {\n      type: darkMode ? \"dark\" : \"light\",\n    },\n  });\n\n  const useStyles = makeStyles({\n    root: {\n      margin: 0,\n      padding: 0,\n      height: \"100%\",\n      background: \"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)\",\n    },\n  });\n\n  const classes = useStyles();\n\n\n\n  return(\n    <ThemeProvider theme={theme}>\n      <Paper className={classes.root} square={true} elevation={0} height=\"150%\" pb={5}>\n        <Grid container direction=\"column\" spacing={5}>\n\n          <Grid item>\n            <Header \n              darkMode={darkMode}\n              setDarkMode={setDarkMode}\n            />\n          </Grid>\n\n          <Grid item container justify=\"center\">\n            <SearchBox \n              handleUserInput={handleUserInput}\n              userInput={userInput}\n              keepFoods={keepFoods}\n            />\n          </Grid>\n\n          <Grid item container spacing={4} justify=\"center\">\n            <Grid item xs={10} sm={8} md={5}>\n              <ImgMediaCard \n                data={foodData}\n                handleChecked={handleChecked}\n                handleDataTransform={handleDataTransform}\n                handleClearTable={handleClearTable}\n                image={\"https://images.unsplash.com/photo-1506395308321-904a71783d60?ixlib=rb-1.2.1&auto=format&fit=crop&w=930&q=80\"}\n              />\n            </Grid>\n\n              {isNotEmpty(foodTransformed)? <Grid item xs={10} sm={8} md={5}><Chart data={foodTransformed}/></Grid> : null}            \n\n          </Grid>\n\n          <Grid item ></Grid>\n\n        </Grid>\n      </Paper>\n    </ThemeProvider>\n  )\n};\n\nexport default App; "]},"metadata":{},"sourceType":"module"}